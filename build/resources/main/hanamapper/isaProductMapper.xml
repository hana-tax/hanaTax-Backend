<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.domain.product.isa.mapper.IsaProductMapper">

    <!-- select 문으로 리스트 조회 -->
    <select id="getPortfolio" resultType="com.example.demo.domain.product.isa.dto.IsaPortfolioListResponse">
        SELECT
            portfolioId, portfolioName, minAccount, commission, description
        FROM
            portfolio
        ORDER BY portfolioId
    </select>

    <insert id="signUpForIsaAccount" parameterType="com.example.demo.domain.product.isa.dto.IsaAccountDto">
        INSERT INTO isa_account (
            isa_accountNo,
            accountPasswd,
            createDate,
            expirationDate,
            accountStatus,
            sum,
            balance,
            portfolioId,
            id,
            accountType
        ) VALUES (
                     #{isa_accountNo},
                     #{accountPasswd},
                     #{createDate},
                     #{expirationDate},
                     #{accountStatus},
                     #{sum},
                     #{balance},
                     #{portfolioId},
                     #{id},
                     #{accountType}
                 )
    </insert>

    <insert id="insertJoinHistory" parameterType="com.example.demo.domain.product.deposit.dto.JoinHistoryDto">
        INSERT INTO join_history (
            subscribeId,
            accountType,
            accountNumber,
            joinAccount,
            joinDate,
            expirationDate,
            interest,
            interestMethod,
            joinStatus,
            id
        ) VALUES (
                     subscribe_id_seq.NEXTVAL,
                     #{accountType},
                     #{accountNumber},
                     #{joinAccount},
                     #{joinDate},
                     #{expirationDate},
                     #{interest},
                     #{interestMethod},
                     #{joinStatus},
                     #{id}
                 )
    </insert>

</mapper>
